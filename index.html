<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Steam Deck DUB Edition - Unofficial Guide and Documentation">
        <meta name="theme-color" content="#1a1a1a">
        <title>Steam Deck DUB Edition</title>
        
        <!-- Favicon -->
        <link rel="icon" href="src/assets/favicon.ico" type="image/x-icon">
        <link rel="apple-touch-icon" href="src/assets/images/icon-192.png">
        
        <!-- Main Stylesheet -->
        <link rel="stylesheet" type="text/css" href="src/styles/main.css">
        
        <!-- Preload critical fonts -->
        <link rel="preload" href="src/assets/fonts/Roboto-Regular.woff2" as="font" type="font/woff2" crossorigin>
        
        <!-- Application manifest -->
        <link rel="manifest" href="manifest.json">
        
        <!-- Progressive Web App meta tags -->
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
        <meta name="apple-mobile-web-app-title" content="SDDE">
        <link rel="apple-touch-icon" href="icons/icon-192x192.png">
        <meta name="theme-color" content="#1a9fff">
    </head>
    <body>
        <!-- Background elements -->
        <div class="background">
            <div class="gradient-overlay"></div>
            <div class="noise-texture"></div>
        </div>
        
        <!-- Header -->
        <header id="header" class="app-header">
            <div class="header-content">
                <div class="logo-container">
                    <img src="src/assets/images/logo.svg" alt="Steam Deck DUB Edition Logo" class="logo">
                </div>
                <div class="title-container">
                    <h1>Steam Deck DUB Edition</h1>
                    <p class="subtitle">Unofficial Guide &amp; Documentation</p>
                </div>
                <div class="header-actions">
                    <button id="theme-toggle" class="icon-button" aria-label="Toggle dark/light theme">
                        <span class="icon theme-icon"></span>
                    </button>
                    <button id="search-toggle" class="icon-button" aria-label="Toggle search">
                        <span class="icon search-icon"></span>
                    </button>
                    <button id="help-button" class="icon-button" aria-label="Open help center">
                        <span class="icon help-icon"></span>
                    </button>
                    <button id="menu-toggle" class="icon-button mobile-only" aria-label="Toggle navigation menu">
                        <span class="icon menu-icon"></span>
                    </button>
                </div>
            </div>
            <div class="search-container">
                <input type="text" id="search-input" placeholder="Search guide..." aria-label="Search guide content">
                <button id="search-clear" class="icon-button" aria-label="Clear search">
                    <span class="icon clear-icon"></span>
                </button>
            </div>
        </header>
        
        <!-- Main content area -->
        <main class="app-content">
            <!-- Navigation sidebar -->
            <nav id="navigation" class="sidebar">
                <div class="nav-section">
                    <h2>Guide Navigation</h2>
                    <ul class="nav-list">
                        <li><a href="#getting-started" data-section="getting-started">Getting Started</a></li>
                        <li><a href="#installation" data-section="installation">Installation</a></li>
                        <li><a href="#features" data-section="features">Features</a></li>
                        <li><a href="#customization" data-section="customization">Customization</a></li>
                        <li><a href="#troubleshooting" data-section="troubleshooting">Troubleshooting</a></li>
                        <li><a href="#faq" data-section="faq">FAQ</a></li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h2>Settings</h2>
                    <ul class="nav-list">
                        <li><a href="#settings-display" data-section="settings-display">Display</a></li>
                        <li><a href="#settings-performance" data-section="settings-performance">Performance</a></li>
                        <li><a href="#settings-power" data-section="settings-power">Power</a></li>
                        <li><a href="#settings-audio" data-section="settings-audio">Audio</a></li>
                    </ul>
                </div>
                
                <div id="table-of-contents" class="nav-section"></div>
            </nav>
            
            <!-- Main content container -->
            <div class="content-wrapper">
                <!-- No results message for search -->
                <div id="no-results" class="no-results" style="display: none;">
                    <h2>No results found</h2>
                    <p>Try different keywords or browse the guide navigation.</p>
                </div>
                
                <!-- Dynamic content container -->
                <div id="dynamic-content" class="content-container">
                    <!-- Content will be loaded here -->
                    <section class="welcome-section">
                        <h1>Welcome to Steam Deck DUB Edition</h1>
                        <p class="lead">Your comprehensive guide to Steam Deck DUB Edition, the unofficial community-driven enhancement package for Steam Deck.</p>
                        
                        <div class="feature-cards">
                            <div class="feature-card">
                                <h3>Getting Started</h3>
                                <p>Learn how to install and set up Steam Deck DUB Edition on your device.</p>
                                <a href="#getting-started" data-section="getting-started" class="button">Get Started</a>
                            </div>
                            
                            <div class="feature-card">
                                <h3>Key Features</h3>
                                <p>Explore the enhancements and optimizations included in the DUB Edition.</p>
                                <a href="#features" data-section="features" class="button">View Features</a>
                            </div>
                            
                            <div class="feature-card">
                                <h3>Troubleshooting</h3>
                                <p>Find solutions to common issues and learn advanced troubleshooting.</p>
                                <a href="#troubleshooting" data-section="troubleshooting" class="button">Fix Issues</a>
                            </div>
                        </div>
                        
                        <div class="version-info">
                            <p>Current Version: <span id="current-version">1.5.2</span></p>
                            <p>Last Updated: <span id="last-updated">June 15, 2023</span></p>
                        </div>
                    </section>
                </div>
                
                <!-- Back to top button -->
                <button id="back-to-top" class="back-to-top-button" aria-label="Back to top">
                    <span class="icon arrow-up-icon"></span>
                </button>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-content">
                <p>&copy; 2023 Steam Deck DUB Edition - Community Project</p>
                <p>Not affiliated with Valve Corporation. Steam and Steam Deck are trademarks of Valve Corporation.</p>
                <div class="footer-links">
                    <a href="#about" data-section="about">About</a>
                    <a href="#privacy" data-section="privacy">Privacy</a>
                    <a href="https://github.com/steamdeck-dub/steamdeck-dub" target="_blank" rel="noopener">GitHub</a>
                </div>
            </div>
        </footer>
        
        <!-- Scripts -->
        <script type="module">
            // Import app initializer
            import appInit from './src/scripts/app-init.js';
            
            // Navigation handling
            document.querySelectorAll('[data-section]').forEach(link => {
                link.addEventListener('click', (event) => {
                    event.preventDefault();
                    const sectionId = link.getAttribute('data-section');
                    appInit.loadContent(sectionId);
                    
                    // Update URL without page reload
                    history.pushState({section: sectionId}, '', `#${sectionId}`);
                    
                    // Close mobile navigation if open
                    document.getElementById('navigation').classList.remove('open');
                });
            });
            
            // Mobile menu toggle
            document.getElementById('menu-toggle').addEventListener('click', () => {
                document.getElementById('navigation').classList.toggle('open');
            });
            
            // Handle browser back/forward
            window.addEventListener('popstate', (event) => {
                if (event.state && event.state.section) {
                    appInit.loadContent(event.state.section);
                } else {
                    // Default to home page if no state
                    appInit.loadContent('home');
                }
            });
            
            // Check for URL hash on load
            document.addEventListener('DOMContentLoaded', () => {
                const hash = window.location.hash.substring(1);
                if (hash) {
                    appInit.loadContent(hash);
                }
            });
            
            // Register service worker for offline support
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/src/scripts/services/service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registered with scope:', registration.scope);
                        
                        // Check for updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            console.log('Service Worker update found!');
                            
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // New content is available, show refresh notification
                                    appInit.showUpdateNotification();
                                }
                            });
                        });
                    })
                    .catch(error => {
                        console.error('Service Worker registration failed:', error);
                    });
                    
                // Handle refresh request from user
                let refreshing = false;
                navigator.serviceWorker.addEventListener('controllerchange', () => {
                    if (!refreshing) {
                        refreshing = true;
                        window.location.reload();
                    }
                });
            }
        </script>
    </body>
</html> 